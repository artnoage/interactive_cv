---
title: Daily Note - 2025-06-30
tags: [daily-note, 2025]
date: 2025-06-30
created: 2025-06-30T20:00:00
weather: 
mood: productive
# Metadata for Interactive CV
topics: [web-architecture, javascript-porting, mcts-optimization, alphazero, onnx, policy-value-consistency, client-side-development]
people: [mark-s-ball]
projects: [collapsi-web, collapsi-alphazero, hierarchical-notes]
papers: []
tools: [javascript, onnx, pytorch, tailscale, localStorage, webstorage]
insights: [standalone-web-benefits, mcts-performance-bottleneck, policy-value-consistency-gap, client-side-ai]
---

# Daily Note - 2025-06-30

## üéØ Today's Goals
- [x] Refactor Collapsi to standalone web architecture
- [x] Implement MCTS refactoring and ONNX support
- [x] Add AI opponent to web UI
- [x] Improve code quality based on review feedback
- [x] Implement AlphaZero-style training
- [x] Set up Tailscale networking
- [x] Create hierarchical note templates

## üìù Notes

### Morning Thoughts
Today was an incredibly productive day working on the Collapsi project. Made major architectural changes that transformed the project from a client-server application to a standalone web application.

### Meetings & Calls
*No meetings - Deep work day*

### Key Accomplishments

#### 1. **Collapsi Web Architecture Refactor**
- Created complete JavaScript port of game logic (`collapsi-game.js`)
- Implemented JavaScript environment wrapper (`collapsi-env.js`)
- Removed entire backend dependency - game runs 100% client-side
- Added save/load system with localStorage and JSON export/import
- Cleaned up project structure, removing obsolete directories

#### 2. **AI Integration and MCTS Improvements**
- Extracted MCTS into standalone module supporting both PyTorch and ONNX
- Created ONNX conversion script with 60-70% file size reduction
- Integrated AI opponent into web UI using ONNX runtime
- Improved UI with three-column layout and enlarged game board
- Added creator attribution with tutorial video by @mark-s-ball

#### 3. **Code Quality Enhancements**
- Fixed MCTS performance issue (was creating instance per move!)
- Extracted common evaluation logic reducing ~40 lines of duplicate code
- Created centralized state preparation helper function
- Made all PPO hyperparameters configurable via CLI
- Cleaned up architecture with better separation of concerns

#### 4. **AlphaZero Implementation**
- Built complete AlphaZero-style training system
- Implemented policy distillation from MCTS
- Added temperature-based exploration
- Improved CUDA detection and logging
- Created proper session-based checkpoint management

#### 5. **Additional Improvements**
- Set up Tailscale for secure networking across devices
- Created hierarchical note template system (Daily ‚Üí Weekly ‚Üí Monthly)
- Documented all changes comprehensively in README and CLAUDE.md

## üí° Ideas & Insights

### AlphaZero Policy-Value Consistency Observation
Noticed an interesting pattern during training: policy loss decreases while value loss remains high. This suggests the policy might be memorizing MCTS patterns without true understanding. #alphazero-insights

**Key insight**: If the policy truly understands good moves, it should implicitly understand position values. The persistent gap indicates potential for improvement.

**Potential solution**: Add a consistency loss term that enforces V(s) ‚âà expected value following the policy. This could force genuine understanding rather than pattern matching, especially important in short games where MCTS often reaches terminal nodes.

### Benefits of Standalone Web Architecture
The refactoring to pure client-side has massive benefits: #web-architecture
- Zero server costs
- Instant deployment on static hosts
- Better performance (no network latency)
- Offline capability
- Simpler development workflow

## üìö Learning
- **Read**: Various code review feedback on RL training patterns
- **Watched**: Mark S. Ball's Collapsi tutorial (integrated into UI)
- **Discovered**: MCTS instantiation was a major performance bottleneck

## üîÑ Tomorrow's Priorities
1. Test the AlphaZero training with full 1M episodes
2. Implement the policy-value consistency loss experiment
3. Create more sophisticated AI difficulty levels for web UI

## üîó References
- [[Collapsi Web Architecture]]
- [[AlphaZero Implementation Notes]]
- Mark S. Ball's tutorial: [embedded in UI]
- ONNX runtime documentation

---
**Reflection**: Extremely productive day with major architectural improvements across the entire Collapsi project. The transformation to standalone web architecture was particularly satisfying, and the code quality improvements make the codebase much more maintainable.

**Gratitude**: I'm grateful for the clear code review feedback that led to significant performance improvements, and for the opportunity to work deeply on interesting technical challenges combining game development, web technologies, and machine learning.

---