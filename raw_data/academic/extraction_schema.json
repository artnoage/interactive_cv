{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Academic Paper Extraction Schema (Analysis-Aligned)",
  "description": "Schema for extracting entities and relationships from academic paper analyses following the three-phase structure",
  
  "definitions": {
    "entities": {
      "paper": {
        "type": "object",
        "required": ["title", "file_path"],
        "properties": {
          "title": {"type": "string"},
          "authors": {"type": "array", "items": {"type": "string"}},
          "year": {"type": "string", "pattern": "^\\d{4}$"},
          "venue": {"type": "string"},
          "file_path": {"type": "string"},
          "domain": {
            "type": "string",
            "enum": ["mathematics", "computer_science", "physics"],
            "description": "Primary domain of the paper"
          },
          "core_contribution": {"type": "string"},
          "problem_addressed": {"type": "string"},
          "initial_assessment": {"type": "string"}
        }
      },
      
      "mathematical_concept": {
        "type": "object",
        "required": ["name", "category"],
        "properties": {
          "name": {"type": "string"},
          "category": {
            "type": "string",
            "enum": ["theory", "space", "metric", "operator", "functional", "equation", "principle"]
          },
          "description": {"type": "string"},
          "phase": {"type": "string", "enum": ["reconnaissance", "deep_dive", "synthesis"]}
        }
      },
      
      "method": {
        "type": "object",
        "required": ["name", "type"],
        "properties": {
          "name": {"type": "string"},
          "type": {
            "type": "string",
            "enum": ["analytical", "computational", "algorithmic", "theoretical", "experimental"]
          },
          "description": {"type": "string"}
        }
      },
      
      "application": {
        "type": "object",
        "required": ["domain", "use_case"],
        "properties": {
          "domain": {
            "type": "string",
            "enum": ["machine_learning", "robotics", "finance", "healthcare", "physics", "biology", "engineering", "computer_vision", "nlp", "optimization", "control_systems", "other"]
          },
          "use_case": {"type": "string"},
          "impact": {"type": "string"},
          "practical_implication": {"type": "string"}
        }
      },
      
      "algorithm": {
        "type": "object",
        "required": ["name", "purpose"],
        "properties": {
          "name": {"type": "string"},
          "purpose": {"type": "string"},
          "complexity": {"type": "string"},
          "key_idea": {"type": "string"}
        }
      },
      
      "assumption": {
        "type": "object",
        "required": ["description", "importance"],
        "properties": {
          "description": {"type": "string"},
          "importance": {"type": "string", "enum": ["critical", "significant", "minor"]},
          "validity_domain": {"type": "string"}
        }
      },
      
      "limitation": {
        "type": "object",
        "required": ["description", "severity"],
        "properties": {
          "description": {"type": "string"},
          "severity": {"type": "string", "enum": ["major", "moderate", "minor"]},
          "boundary_condition": {"type": "string"}
        }
      },
      
      "future_work": {
        "type": "object",
        "required": ["description", "priority"],
        "properties": {
          "description": {"type": "string"},
          "priority": {"type": "string", "enum": ["immediate", "near_term", "long_term"]},
          "open_question": {"type": "string"}
        }
      },
      
      "insight": {
        "type": "object",
        "required": ["description", "significance"],
        "properties": {
          "description": {"type": "string"},
          "significance": {"type": "string"},
          "enables": {"type": "array", "items": {"type": "string"}}
        }
      },
      
      "evaluation": {
        "type": "object",
        "required": ["type", "summary"],
        "properties": {
          "type": {"type": "string", "enum": ["experimental", "theoretical", "empirical"]},
          "datasets": {"type": "array", "items": {"type": "string"}},
          "metrics": {"type": "array", "items": {"type": "string"}},
          "baselines": {"type": "array", "items": {"type": "string"}},
          "summary": {"type": "string"},
          "statistical_significance": {"type": "boolean"}
        }
      },
      
      "proof_analysis": {
        "type": "object",
        "required": ["theorem", "strategy"],
        "properties": {
          "theorem": {"type": "string"},
          "strategy": {"type": "string"},
          "key_lemmas": {"type": "array", "items": {"type": "string"}},
          "potential_gaps": {"type": "array", "items": {"type": "string"}},
          "examples": {"type": "array", "items": {"type": "string"}}
        }
      },
      
      "research_area": {
        "type": "object",
        "required": ["name", "field"],
        "properties": {
          "name": {"type": "string"},
          "field": {
            "type": "string",
            "enum": ["mathematics", "computer_science", "physics", "engineering", "statistics", "interdisciplinary"]
          }
        }
      },
      
      "person": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {"type": "string"},
          "role": {"type": "string"},
          "affiliation": {"type": "string"}
        }
      },
      
      "institution": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {"type": "string"},
          "type": {
            "type": "string",
            "enum": ["university", "research_institute", "company", "government", "other"]
          },
          "location": {"type": "string"}
        }
      }
    },
    
    "relationships": {
      "type": "object",
      "required": ["type", "from_entity", "from_id", "to_entity", "to_id"],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "INTRODUCES",
            "APPLIES",
            "ENABLES",
            "BUILDS_ON",
            "SOLVES",
            "RELATED_TO",
            "AUTHORED_BY",
            "AFFILIATED_WITH",
            "BELONGS_TO",
            "USES_FOR",
            "ASSUMES",
            "LIMITED_BY",
            "LEADS_TO",
            "VALIDATES",
            "CRITIQUES"
          ]
        },
        "from_entity": {"type": "string"},
        "from_id": {"type": "string"},
        "to_entity": {"type": "string"},
        "to_id": {"type": "string"},
        "properties": {"type": "object"},
        "phase": {"type": "string", "enum": ["reconnaissance", "deep_dive", "synthesis"]}
      }
    }
  },
  
  "type": "object",
  "required": ["paper", "entities", "relationships"],
  "properties": {
    "paper": {"$ref": "#/definitions/entities/paper"},
    "entities": {
      "type": "object",
      "properties": {
        "mathematical_concepts": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/mathematical_concept"}
        },
        "methods": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/method"}
        },
        "applications": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/application"}
        },
        "algorithms": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/algorithm"}
        },
        "assumptions": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/assumption"}
        },
        "limitations": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/limitation"}
        },
        "future_works": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/future_work"}
        },
        "insights": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/insight"}
        },
        "evaluations": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/evaluation"}
        },
        "proof_analyses": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/proof_analysis"}
        },
        "research_areas": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/research_area"}
        },
        "people": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/person"}
        },
        "institutions": {
          "type": "array",
          "items": {"$ref": "#/definitions/entities/institution"}
        }
      }
    },
    "relationships": {
      "type": "array",
      "items": {"$ref": "#/definitions/relationships"}
    }
  },
  
  "extraction_rules": {
    "domain_specific": {
      "mathematics": {
        "priority_entities": ["proof_analyses", "mathematical_concepts", "assumptions"],
        "required_sections": ["proof_scrutiny", "examples", "counterexamples"]
      },
      "computer_science": {
        "priority_entities": ["algorithms", "evaluations", "applications"],
        "required_sections": ["problem_formulation", "evaluation", "reproducibility"]
      },
      "physics": {
        "priority_entities": ["methods", "evaluations", "assumptions"],
        "required_sections": ["theoretical_framework", "experimental_setup", "data_analysis"]
      }
    },
    "phase_based": {
      "reconnaissance": {
        "focus": ["title", "abstract", "initial_assessment", "problem_addressed"]
      },
      "deep_dive": {
        "focus": ["technical_content", "critical_analysis", "domain_specific_elements"]
      },
      "synthesis": {
        "focus": ["key_insights", "future_work", "limitations", "implications"]
      }
    },
    "critical_analysis": {
      "required_elements": ["assumptions", "limitations", "alternative_explanations"],
      "quality_checks": ["evidence_quality", "logic_chain", "boundary_conditions"]
    },
    "entity_limits": {
      "mathematical_concepts": {"min": 3, "max": 20},
      "methods": {"min": 2, "max": 10},
      "applications": {"min": 1, "max": 10},
      "assumptions": {"min": 1, "max": 10},
      "limitations": {"min": 1, "max": 10},
      "insights": {"min": 1, "max": 10},
      "future_works": {"min": 1, "max": 10}
    },
    "relationship_rules": {
      "required_types": ["INTRODUCES", "APPLIES", "ASSUMES", "LIMITED_BY"],
      "max_per_type": 20,
      "phase_tracking": true
    }
  }
}